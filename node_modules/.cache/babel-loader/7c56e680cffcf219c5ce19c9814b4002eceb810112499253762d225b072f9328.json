{"ast":null,"code":"import\"./App.css\";import React,{useEffect,useState}from\"react\";import{API}from\"./api/api\";import Header from\"./components/Header\";import Context from\"./Context/Context\";import{Container,Pagination}from\"@mui/material\";import GoodsList from\"./components/GoodsList/GoodsList\";import SearchForm from\"./components/SearchForm/SearchForm\";import Preloader from\"./components/Preloader/Preloader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[items,setItems]=useState([]);const[brands,setBrands]=useState([]);const[filteredItems,setFilteredItems]=useState([]);const[filtered,setFiltered]=useState(false);const[listItems,setListItems]=useState(50);const[offset,setOffset]=useState(0);const[search,setSearch]=useState(\"\");const[loading,setLoading]=useState(false);const[open,setOpen]=useState(false);const[qtyItems,setQtyItems]=useState(0);const step=50;const pages=Math.ceil(qtyItems/step);const filteredPages=Math.ceil(qtyItems/step);const paginItems=filteredItems.slice(listItems-50,listItems);useEffect(()=>{let sortBrand;let product;!filtered&&API.getItemIds(offset).then(data=>{setLoading(true);return API.getItems(data.data.result);}).then(data=>{(()=>{product=[...new Map(data.data.result.map(el=>[el.id,el])).values()];})();setItems(product);}).catch(err=>{console.log(err);if(err.response.status===500){API.getItemIds();}});API.getQtyItems().then(data=>{setQtyItems(data.data.result.length);});API.getFields().then(data=>{(()=>{sortBrand=data.data.result.reduce((acc,item)=>{if(acc.includes(item)){return acc;}return[...acc,item];},[]);setBrands(sortBrand);})();}).catch(err=>{console.log(err);if(err.response.status===500){API.getItemIds();}});},[offset,filtered]);useEffect(()=>{let product;!!filtered&&API.getFilter(search).then(data=>{setLoading(true);return API.getItems(data.data.result);}).then(data=>{(()=>{product=[...new Map(data.data.result.map(el=>[el.id,el])).values()];})();setFilteredItems(product);setQtyItems(product.length);}).catch(err=>{console.log(err);if(err.message){API.getFilter(search);}});},[search,filtered,qtyItems]);const handleChange=e=>{console.log(e);if(!e.target.value){setItems(items);setSearch(\"\");setFiltered(false);return;}setFiltered(true);setSearch(e.target.value);};const handleShowNextPage=n=>{setListItems(n*step);};const toggleDrawer=newOpen=>{setOpen(newOpen);};const valueContext={items,setOffset,brands,search,handleChange,filtered,filteredItems,paginItems,open,toggleDrawer};return/*#__PURE__*/_jsxs(Context.Provider,{value:valueContext,children:[/*#__PURE__*/_jsx(Header,{}),loading&&items.length===0?/*#__PURE__*/_jsx(Preloader,{}):/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(SearchForm,{}),/*#__PURE__*/_jsx(GoodsList,{}),!filtered&&/*#__PURE__*/_jsx(Pagination,{color:\"primary\",count:pages,onChange:(_,n)=>setOffset(step*(n-1)),sx:{display:\"flex\",justifyContent:\"center\",m:\"25px 0 \"}}),!!filtered&&/*#__PURE__*/_jsx(Pagination,{color:\"primary\",count:filteredPages,onChange:(_,n)=>handleShowNextPage(n),sx:{display:\"flex\",justifyContent:\"center\",m:\"25px 0 \"}})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","API","Header","Context","Container","Pagination","GoodsList","SearchForm","Preloader","jsx","_jsx","jsxs","_jsxs","App","items","setItems","brands","setBrands","filteredItems","setFilteredItems","filtered","setFiltered","listItems","setListItems","offset","setOffset","search","setSearch","loading","setLoading","open","setOpen","qtyItems","setQtyItems","step","pages","Math","ceil","filteredPages","paginItems","slice","sortBrand","product","getItemIds","then","data","getItems","result","Map","map","el","id","values","catch","err","console","log","response","status","getQtyItems","length","getFields","reduce","acc","item","includes","getFilter","message","handleChange","e","target","value","handleShowNextPage","n","toggleDrawer","newOpen","valueContext","Provider","children","color","count","onChange","_","sx","display","justifyContent","m"],"sources":["C:/Code/work_project/testTask/ValantisTask/valantis-task/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport React, { useEffect, useState } from \"react\";\nimport { API } from \"./api/api\";\nimport Header from \"./components/Header\";\nimport Context from \"./Context/Context\";\nimport { Container, Pagination } from \"@mui/material\";\nimport GoodsList from \"./components/GoodsList/GoodsList\";\nimport SearchForm from \"./components/SearchForm/SearchForm\";\nimport Preloader from \"./components/Preloader/Preloader\";\nfunction App() {\n  const [items, setItems] = useState([]);\n  const [brands, setBrands] = useState([]);\n\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [filtered, setFiltered] = useState(false);\n  const [listItems, setListItems] = useState(50);\n\n  const [offset, setOffset] = useState(0);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n\n\n  const [qtyItems, setQtyItems] = useState(0);\n\n  const step = 50;\n  const pages = Math.ceil(qtyItems / step);\n  const filteredPages = Math.ceil(qtyItems / step);\n  const paginItems = filteredItems.slice(listItems - 50, listItems);\n\n  useEffect(() => {\n    let sortBrand;\n    let product;\n\n    !filtered &&\n      API.getItemIds(offset)\n        .then((data) => {\n          setLoading(true);\n          return API.getItems(data.data.result);\n        })\n        .then((data) => {\n          (() => {\n            product = [\n              ...new Map(data.data.result.map((el) => [el.id, el])).values(),\n            ];\n          })();\n          setItems(product);\n        })\n        .catch((err) => {\n          console.log(err);\n          if (err.response.status === 500) {\n            API.getItemIds();\n          }\n        });\n\n    API.getQtyItems().then((data) => {\n      setQtyItems(data.data.result.length);\n    });\n\n    API.getFields()\n      .then((data) => {\n        (() => {\n          sortBrand = data.data.result.reduce((acc, item) => {\n            if (acc.includes(item)) {\n              return acc;\n            }\n            return [...acc, item];\n          }, []);\n          setBrands(sortBrand);\n        })();\n      })\n      .catch((err) => {\n        console.log(err);\n        if (err.response.status === 500) {\n          API.getItemIds();\n        }\n      });\n  }, [offset, filtered]);\n\n  useEffect(() => {\n    let product;\n    !!filtered &&\n      API.getFilter(search)\n        .then((data) => {\n          setLoading(true);\n          return API.getItems(data.data.result);\n        })\n        .then((data) => {\n          (() => {\n            product = [\n              ...new Map(data.data.result.map((el) => [el.id, el])).values(),\n            ];\n          })();\n          setFilteredItems(product);\n          setQtyItems(product.length);\n        })\n\n        .catch((err) => {\n          console.log(err);\n          if (err.message) {\n            API.getFilter(search);\n          }\n        });\n  }, [search, filtered, qtyItems]);\n\n  const handleChange = (e) => {\n    console.log(e);\n\n    if (!e.target.value) {\n      setItems(items);\n      setSearch(\"\");\n      setFiltered(false);\n      return;\n    }\n    setFiltered(true);\n    setSearch(e.target.value);\n  };\n\n  const handleShowNextPage = (n) => {\n    setListItems(n * step);\n  };\n\n  const toggleDrawer = (newOpen) => {\n    setOpen(newOpen);\n  };\n  const valueContext = {\n    items,\n    setOffset,\n    brands,\n    search,\n    handleChange,\n    filtered,\n    filteredItems,\n    paginItems,\n    open,\n    toggleDrawer\n  };\n  return (\n    <Context.Provider value={valueContext}>\n      <Header />\n      {loading && items.length === 0 ? (\n        <Preloader />\n      ) : (\n        <Container>\n          <SearchForm />\n          <GoodsList />\n          {!filtered && (\n            <Pagination\n              color=\"primary\"\n              count={pages}\n              onChange={(_, n) => setOffset(step * (n - 1))}\n              sx={{ display: \"flex\", justifyContent: \"center\", m: \"25px 0 \" }}\n            />\n          )}\n          {!!filtered && (\n            <Pagination\n              color=\"primary\"\n              count={filteredPages}\n              onChange={(_, n) => handleShowNextPage(n)}\n              sx={{ display: \"flex\", justifyContent: \"center\", m: \"25px 0 \" }}\n            />\n          )}\n        </Container>\n      )}\n    </Context.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}